---
title: Drupal
description: Quickstart integration of Drupal web application with FusionAuth
navcategory: getting-started
prerequisites: Drupal, Docker, Composer, Drush
section: web
technology: Drupal
language: PHP
icon: /img/icons/drupal.svg
faIcon: fa-gem
color: rose
cta: EmailListCTA
---
import Aside from '../../components/Aside.astro';
import LoginAfter from '../../diagrams/quickstarts/login-after.astro';
import LoginBefore from '../../diagrams/quickstarts/login-before.astro';
import RemoteCode from '../../components/RemoteCode.astro';
import RemoteValue from '../../components/RemoteValue/RemoteValue.astro';

You will create a Drupal application and integrate it with FusionAuth in this quickstart.
You'll be creating it for [ChangeBank](https://www.youtube.com/watch?v=CXDxNCzUspM), a leader in the world of coin-to-dollar conversion. Both public facing sections and areas designated for logged-in users will be present.

The docker compose file and source code for a complete application are available at
https://github.com/FusionAuth/fusionauth-quickstart-drupal-web

## Prerequisites

- [Composer](https://getcomposer.org/): This will be used to install a copy of Drupal and all required packages.
- [Drupal](https://www.drupal.org/): We'll be grabbing the latest copy of Drupal 10.
- [Drush](https://www.drupal.org/): This is used to control, manipulate and manage the Drupal application from the command line.
- [Docker](https://www.docker.com): The quickest way to stand up FusionAuth. (There are [other ways](/docs/v1/tech/installation-guide/)).

This app has been tested with Drupal 10.1.3. This example should work with other compatible versions of Drupal 10.

<Aside type="note">
Drupal 10 requires PHP 8.1.0 or higher and MariaDB 10.3.7+ or MySQL/Percona 5.7.8+ in order to run.
</Aside>

## General Architecture

Drupal has, by default, a built-in login and authentication system.

As such, the application will resemble the following before FusionAuth is introduced.

<LoginBefore alt={"Request flow during login before FusionAuth"}/>

The login flow will look like this after FusionAuth is introduced.

<LoginAfter alt={"Request flow during login after FusionAuth"}/>

In general, you are introducing FusionAuth in order to normalize and consolidate user data. This helps make sure it is consistent and up-to-date as well as offloading your login security and functionality to FusionAuth.

## Getting Started

In this section, you'll get FusionAuth up and running and use Composer to create a new Drupal application.

### Clone the Code

First off, grab the code from the repository and change into that directory.

```
git clone https://github.com/FusionAuth/fusionauth-quickstart-php-drupal-web.git
cd fusionauth-quickstart-drupal-web
```

### Run FusionAuth via Docker

In the root directory of the repo you'll find a Docker compose file (docker-compose.yml) and an environment variables configuration file (.env). Assuming you have Docker installed on your machine, you can stand up FusionAuth up on your machine with:

```
docker compose up -d
```

Here you are using a bootstrapping feature of FusionAuth, called [Kickstart](/docs/v1/tech/installation-guide/kickstart). When FusionAuth comes up for the first time, it will look at the `kickstart/kickstart.json` file and configure FusionAuth to a certain initial state.

<Aside type="note">
If you ever want to reset the FusionAuth system, delete the volumes created by docker-compose by executing `docker compose down -v`, then re-run `docker compose up -d`.
</Aside>

FusionAuth will be initially configured with these settings:

* Your client Id is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.variables.applicationId" /></code>.
* Your client secret is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.requests.[?(@.url === '/api/application/#{applicationId}')].body.application.oauthConfiguration.clientSecret" /></code>.
* Your example username is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.variables.userEmail" /></code> and the password is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-drupal-web/main/kickstart/kickstart.json" selector="$.variables.userPassword" /></code>.
* Your admin username is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.variables.adminEmail" /></code> and the password is <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.variables.adminPassword" /></code>.
* The base URL of FusionAuth `http://localhost:9011/`.

You can log into the [FusionAuth admin UI](http://localhost:9011/admin) and look around if you want, but with Docker/Kickstart you don't need to.

### Create your Drupal Application

Now you are going to create a Drupal application. In your terminal, run the following command to pull the latest version of Drupal 10:

```bash
composer create-project drupal/recommended-project:10.1.5 "changebank" && cd changebank
```

Navigate to your browser and enter the path to your drupal installation.

Run through the installation wizard and fill in all required fields.

Once you've successfully completed the installation wizard you should land up on the welcome page.

Now that your Drupal application is installed, we're going to install a contributed module called OpenID Connect that will handle the authentication with FusionAuth and another module called Admin Toolbar which adds a bit of quality of life when navigating Drupal's administration menu.

Flip back to your terminal and run the following command:

```bash
composer require 'drupal/openid_connect:3.x-dev@dev' 'drupal/admin_toolbar:^3.4'
```

To enable the modules, you can do so by visiting the extensions page of your Drupal application at /admin/modules or by running the following command:

```bash
drush pm-enable openid_connect admin_toolbar 
```

## Authentication

To setup the authentication between Drupal and FusionAuth, head to /admin/config/people/openid-connect on your Drupal site or hover over Configuration > People and click on OpenID Connect.

Add a new client by clicking on + Generic OAuth 2.0 and then filling in the details as follows:

- Name:
- Client ID:
- Client secret:
- Authorization endpoint:
- Token endpoint:

## App Customization

In this section, you'll turn your application into a trivial banking application with some styling.

We're going to create a module called Changebank that will handle the logic for making change from whole dollars and also add a couple of blocks to the application.

### Generate Module

At your terminal, make sure you are inside the Drupal project directory and run the following command:

```bash
drush generate module 
```
You will then be presented with a wizard and should aim to fill it out as follows:

<div style="background-color: #000; padding: 20px">
Welcome to module generator!</br>
<span style="color: teal">____________________________________</span><br/><br/>
<span style="color: green">Module name</span> [<span style="color: yellow">Web</span>]:<br/>
&rarr; Changebank<br/>
<span style="color: green">Module machine name</span> [<span style="color: yellow">changebank</span>]:<br/>
&rarr; changebank<br/>
<span style="color: green">Module description</span> [<span style="color: yellow">Provides additional functionality for the site.</span>]:<br/>
&rarr; Provides a way to make change from whole dollars.<br/>
<span style="color: green">Package name name</span> [<span style="color: yellow">Custom</span>]:<br/>
&rarr; Custom<br/>
<span style="color: green">Dependencies</span> (<span style="color: green">comma separated</span>):<br/>
&rarr;<br/>
<span style="color: green">Would you like to create a module file</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; Yes<br/>
<span style="color: green">Would you like to create a install file</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Would you like to create a libraries file</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Would you like to create a permissions file</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Would you like to create event subscriber</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Would you like to create block plugin</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; Yes<br/>
<span style="color: green">Would you like to create a controller</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; Yes<br/>
<span style="color: green">Would you like to create a settings form</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/><br/>
The following directories and files have been created or updated:
<span style="color: teal">_______________________________________________________________________</span><br/>
- /var/www/html/web/modules/custom/changebank/changebank.info.yml<br/>
- /var/www/html/web/modules/custom/changebank/changebank.module<br/>
- /var/www/html/web/modules/custom/changebank/changebank.routing.yml<br/>
- /var/www/html/web/modules/custom/changebank/src/Controller/ChangebankController.php<br/>
- /var/www/html/web/modules/custom/changebank/src/Plugin/Block/ExampleBlock.info.yml
</div><br/>

The first block that was created when we generatd the module has a filename of <strong>ExampleBlock.php</strong> which is far too generic.

Navigate to /web/modules/custom/changebank/src/Plugin/Block/ and rename it to <strong>UserLoginLogoutBlock.php</strong> which is more descriptive of its intended purpose.

We're also going to generate an additional block and a form which we will do now.

To generate the block, run the following command and complete the wizard:

```bash
drush generate block 
```

<div style="background-color: #000; padding: 20px">
Welcome to block generator!</br>
<span style="color: teal">____________________________________</span><br/><br/>
<span style="color: green">Module machine name</span> [<span style="color: yellow">web</span>]:<br/>
&rarr; changebank<br/>
<span style="color: green">Block admin label</span> [<span style="color: yellow">Example</span>]:<br/>
&rarr; User Email Block<br/>
<span style="color: green">Plugin ID</span> [<span style="color: yellow">changebank_useremailblock</span>]:<br/>
&rarr; useremailblock<br/>
<span style="color: green">Plugin class</span> [<span style="color: yellow">UserEmailBlockBlock</span>]:<br/>
&rarr; UserEmailBlock<br/>
<span style="color: green">Block category</span> [<span style="color: yellow">Custom</span>]:<br/>
&rarr; Custom<br/>
<span style="color: green">Make the block configurable?</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Would you like to inject dependencies?</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/>
<span style="color: green">Create access callback?</span> [<span style="color: yellow">No</span>]:<br/>
&rarr; No<br/><br/>

The following directories and files have been created or updated:
<span style="color: teal">_______________________________________________________________________</span><br/>
- /var/www/html/web/modules/custom/changebank/src/Plugin/Block/UserEmailBlock.php<br/>
</div><br/>

To generate the form, run the following command and complete that wizard too:

```bash
drush generate form 
```

<div style="background-color: #000; padding: 20px">
Welcome to form generator!</br>
<span style="color: teal">____________________________________</span><br/><br/>
<span style="color: green">Module machine name</span> [<span style="color: yellow">web</span>]:<br/>
&rarr; changebank<br/>
<span style="color: green">Class</span> [<span style="color: yellow">ExampleForm</span>]:<br/>
&rarr; ChangebankForm<br/>
<span style="color: green">Would you like to create a route for this form?</span> [<span style="color: yellow">Yes</span>]:<br/>
&rarr; No<br/><br/>

The following directories and files have been created or updated:
<span style="color: teal">_______________________________________________________________________</span><br/>
- /var/www/html/web/modules/custom/changebank/src/Form/ChangebankForm.php<br/>
</div><br/>

### Customizing the Module

Next, we are going to customize the module by making changes to the following files:

- <strong>ChangebankForm.php</strong>
- <strong>ChangebankController.php</strong>
- <strong>changebank.routing.yml</strong>
- <strong>UserEmailBlock.php</strong>
- <strong>UserLoginLogoutBlock.php</strong>
- <strong>changebank.module</strong>

#### Customizing the Changebank Form

Select the form <strong>ChangebankForm.php</strong> located at /web/modules/custom/changebank/src/Form/ in your text editor, clear the existing boilerplate contents and add the following in:

```php
<?php

namespace Drupal\changebank\Form;

use Drupal\Core\Form\FormBase;
use Drupal\Core\Form\FormStateInterface;

/**
 * Provides a form for creating change from an amount in US dollars.
 */
class ChangebankForm extends FormBase {

  /**
   * {@inheritdoc}
   */
  public function getFormId() {
    return 'changebank_form';
  }

  /**
   * {@inheritdoc}
   */
  public function buildForm(array $form, FormStateInterface $form_state) {
    $result = $form_state->get('result');

    $form['result_wrapper'] = [
      '#type' => 'container',
      '#attributes' => [
        'class' => ['changebank-result-wrapper'],
      ],
    ];

    if ($form_state->get('result')) {
      $form['result_wrapper']['result'] = [
        '#markup' => $result,
      ];
    }

    $form['amount'] = [
      '#type' => 'number',
      '#title' => $this->t('Amount in USD: $'),
      '#required' => TRUE,
      '#min' => 1,
      '#step' => 1.0,
    ];
    $form['submit'] = [
      '#type' => 'submit',
      '#value' => $this->t('Make Change'),
    ];

    return $form;
  }

  /**
   * {@inheritdoc}
   */
  public function submitForm(array &$form, FormStateInterface $form_state) {
    $amount = $form_state->getValue('amount');
    $quarters = 0;
    $dimes = 0;
    $nickels = 0;
    $pennies = 0;

    // Calculate the number of quarters, dimes, nickels, and pennies for every 100 cents (1 dollar).
    $quarters_per_dollar = 2;
    $dimes_per_dollar = 3;
    $nickels_per_dollar = 3;
    $pennies_per_dollar = 5;

    $quarters += floor($amount) * $quarters_per_dollar;
    $dimes += floor($amount) * $dimes_per_dollar;
    $nickels += floor($amount) * $nickels_per_dollar;
    $pennies += floor($amount) * $pennies_per_dollar;

    $amount_in_cents = $amount * 100;
    $amount_in_cents %= 100;

    $quarters += floor($amount_in_cents / 25);
    $amount_in_cents %= 25;
    $dimes += floor($amount_in_cents / 10);
    $amount_in_cents %= 10;
    $nickels += floor($amount_in_cents / 5);
    $amount_in_cents %= 5;
    $pennies += $amount_in_cents;

    $result = $this->t('We can make change for $@dollars with @dimes dimes, @nickels nickels and @pennies pennies!', [
      '@dollars' => $amount,
      '@quarters' => $quarters,
      '@dimes' => $dimes,
      '@nickels' => $nickels,
      '@pennies' => $pennies,
    ]);

    $form_state->setRebuild(TRUE);
    $form_state->set('result', $result);

    \Drupal::state()->set('changebank_form_value', $result);
  }

}
```

#### Customizing the Controller

Select the <strong>ChangebankController.php</strong> file located at /web/modules/custom/changebank/src/Controller/ in your text editor and make the following changes:

```php
<?php

namespace Drupal\changebank\Controller;

use Drupal\Core\Controller\ControllerBase;

/**
 * Returns responses for changebank routes.
 */
class ChangebankController extends ControllerBase {

  /**
   * Builds the response.
   */
  public function build() {
    $build = [];
    $form = $this->formBuilder()->getForm('\Drupal\changebank\Form\ChangebankForm');
    $build['form'] = $form;
    return $build;
  }

  /**
   * Displays the form submission value on the account page.
   */
  public function accountBalance() {
    $value = \Drupal::state()->get('changebank_form_value');
    $arguments = $value->getArguments();
    $dollars = $arguments['@dollars'];
    return [
      '#markup' => '<span class="account-balance">$' . $dollars . '</span>',
      '#cache' => [
        'contexts' => [
          'session',
        ],
        'max-age' => 0,
      ],
    ];
  }

}
```

#### Customizing the Routing

Next we're going to setup two routes, one for the form and one for the account page. Select the <strong>changebank.routing.yml</strong> file located at /web/modules/custom/changebank/ and make the following changes:

```yaml
changebank.makechange:
  path: '/makechange'
  defaults:
    _title: 'We Make Change'
    _controller: '\Drupal\changebank\Controller\ChangebankController::build'
    _form: 'Drupal\changebank\Form\ChangebankForm'
  requirements:
    _user_is_logged_in: 'TRUE'

changebank.account:
  path: '/account'
  defaults:
    _title: 'Your Balance'
    _controller: '\Drupal\changebank\Controller\ChangebankController::accountBalance'
  requirements:
    _user_is_logged_in: 'TRUE'
```

#### Customizing User Email Block

We want to display the current user's email address in a block and we're going to use the User Email Block to do so. Select the <strong>UserEmailBlock.php</strong> file located at /web/modules/custom/changebank/src/Plugin/Block/ and make the following changes:

```php
<?php

namespace Drupal\changebank\Plugin\Block;

use Drupal\Core\Block\BlockBase;
use Drupal\Core\Session\AccountInterface;
use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * Provides a block that displays the current user's email address.
 *
 * @Block(
 *   id = "user_email_block",
 *   admin_label = @Translation("User Email Block")
 * )
 */
class UserEmailBlock extends BlockBase implements ContainerFactoryPluginInterface {

  /**
   * The current user.
   *
   * @var \Drupal\Core\Session\AccountInterface
   */
  protected $currentUser;

  /**
   * Constructs a new UserEmailBlock object.
   *
   * @param array $configuration
   *   The block configuration.
   * @param string $plugin_id
   *   The block plugin ID.
   * @param mixed $plugin_definition
   *   The block plugin definition.
   * @param \Drupal\Core\Session\AccountInterface $current_user
   *   The current user.
   */
  public function __construct(array $configuration, $plugin_id, $plugin_definition, AccountInterface $current_user) {
    parent::__construct($configuration, $plugin_id, $plugin_definition);
    $this->currentUser = $current_user;
  }

  /**
   * {@inheritdoc}
   */
  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
    return new static(
      $configuration,
      $plugin_id,
      $plugin_definition,
      $container->get('current_user')
    );
  }

  /**
   * {@inheritdoc}
   */
  public function build() {
    $email = $this->currentUser->getEmail();
    return [
      '#markup' => $this->t('@email', ['@email' => $email]),
    ];
  }

}
```

#### Customizing User Login Logout Block

We're going to create a block that will display a login button for anonymous users and a logout button for authenticated users. Select the <strong>UserLoginLogoutBlock.php</strong> file located at /web/modules/custom/changebank/src/Plugin/Block/ and make the following changes:

```php
<?php

namespace Drupal\changebank\Plugin\Block;

use Drupal\Core\Block\BlockBase;
use Drupal\Core\Session\AccountInterface;
use Drupal\Core\Plugin\ContainerFactoryPluginInterface;
use Symfony\Component\DependencyInjection\ContainerInterface;

/**
 * Provides a block that displays linked text for anonymous users.
 *
 * @Block(
 *   id = "user_login_logout_block",
 *   admin_label = @Translation("User Login Logout Block")
 * )
 */
class UserLoginLogoutBlock extends BlockBase implements ContainerFactoryPluginInterface {

  /**
   * The current user.
   *
   * @var \Drupal\Core\Session\AccountInterface
   */
  protected $currentUser;

  /**
   * Constructs a new UserLoginLogoutBlock object.
   *
   * @param array $configuration
   *   The block configuration.
   * @param string $plugin_id
   *   The block plugin ID.
   * @param mixed $plugin_definition
   *   The block plugin definition.
   * @param \Drupal\Core\Session\AccountInterface $current_user
   *   The current user.
   */
  public function __construct(array $configuration, $plugin_id, $plugin_definition, AccountInterface $current_user) {
    parent::__construct($configuration, $plugin_id, $plugin_definition);
    $this->currentUser = $current_user;
  }

  /**
   * {@inheritdoc}
   */
  public static function create(ContainerInterface $container, array $configuration, $plugin_id, $plugin_definition) {
    return new static(
      $configuration,
      $plugin_id,
      $plugin_definition,
      $container->get('current_user')
    );
  }

  /**
   * {@inheritdoc}
   */
  public function build() {
    $roles = $this->currentUser->getRoles();
    if (in_array('anonymous', $roles)) {
      return [
        '#markup' => $this->t('<button class="btn btn-primary"><a href="/user/login">Log in</a></button>'),
      ];
    }
    else {
        return [
            '#markup' => $this->t('<button class="btn btn-primary"><a href="/user/logout">Logout</a></button>'),
        ];
    }
  }

}
```

#### Customizing the .Module File

In order to make the blocks available to the application, we need to make some changes to the <strong>changebank.module</strong> file located at /web/modules/custom/changebank/ and add the following:

```php
<?php

/**
 * @file
 * Primary module hooks for changebank module.
 */

/**
 * Implements hook_block_info().
 */
function changebank_block_info() {
    $blocks = [];
  
    $blocks['user_email_block'] = [
      'info' => t('User Email Block'),
      'cache' => DRUPAL_CACHE_PER_ROLE,
    ];

    $blocks['user_login_logout_block'] = [
      'info' => t('User Login Logout Block'),
      'cache' => DRUPAL_CACHE_PER_ROLE,
    ];
  
    return $blocks;
}
```

### Add Styling

#### Download Theme

At this point we have a working application that can make change from whole dollars.

But... it's not very pretty.

We're going to grab a theme called Barrio Bootstrap 5 which will give us a nice starting point for styling the application.

Run the following command to download the theme:

```bash
composer require 'drupal/bootstrap_barrio:^5.5'
```

#### Enable Theme

Now, we're going to enable the theme.

Select the <strong>Appearance</strong> link in the administration menu and click on the <strong>Install</strong> button for both Bootstrap Barrio 5.5.14 and Bootstrap Barrio Subtheme 5.5.14.

Click on the <strong>Set as default</strong> button for Bootstrap Barrio Subtheme 5.5.14.

While we are here, let's add the Changebank logo to our application.

Click on <strong>Settings</strong> on Bootstrap Barrio Subtheme 5.5.14, scroll down and click on <strong>Logo image</strong>.

Uncheck the <strong>Use the logo supplied by the theme</strong> checkbox and upload the Changebank logo from ****

#### Customizing the Stylesheet

Next, we're going to add some styling to the application to make it look a little nicer. Select the <strong>styles.css</strong> file located at /web/themes/custom/changebank/css/ and add the following:

```css
#navbar-top {
    background-color: #fff!important;
}

#navbar-main {
    background-color: #096324!important;
}

.sidebar h2 {
    margin: 0 0 0.5em;
    padding-bottom: 5px;
    text-shadow: 0 1px 0 #fff;
    font-size: 2.071em;
}

.sidebar .block {
    border-style: solid;
    border-width: 1px;
    padding: 15px 15px;
    margin: 0 0 20px;
    background-color: #fff!important;
    border-color: #fff!important;
}

.main-content.col {
    padding-right: 0px;
}

.welcome {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 320px;
}

body {
    overflow-x: hidden;
}

.site-footer {
    display: none;
}

#main-wrapper {
    height: calc(100vh - 204px);
}

.navbar {
    display: block;
}

.email-container {
    display: inline-block;
    vertical-align: middle;
    margin-right: 20px;
}

.button-container {
    display: inline-block;
    vertical-align: middle;
}

.login-container {
    align-items: center;
}

button,
.btn,
.btn-primary {
    background-color: #096324!important;
}

button a {
    color: #fff;
    font-weight: 700;
    text-decoration: none;
    padding-left: 30px;
    padding-right: 30px;
}

button a:hover {  
    color: #fff;
    text-decoration: underline;
}

.block-user-email-block {
    color: #096324;
    font-weight: 400;
}

.navbar-brand img {
    padding: 5px 0px 5px 10px;
    height: 70px;
}

#block-bootstrap-barrio-subtheme-page-title {
    margin-top: 70px;
}

h1, h2, h3, h4, h5, h6 {
    color: #096324;
}

.nav-link {
    font-weight: 500;
    font-size: 20px;
}

.nav-item .active {
    text-decoration: underline;
}

.nav {
    margin-right: 7px;
}

.account-balance {
    font-size: 32px;
    font-weight: 700;
}
```

### Add Menu

Since we created the routes for the form and account page, we're going to add a menu to the application to make it easier to navigate between the two pages.

Hover over <strong>Structure</strong> > <strong>Menus</strong> in the administration menu and click on <strong>Add menu</strong>.

Enter <strong>Changebank Menu</strong> for the <strong>Title</strong> and click on <strong>Save</strong>.

#### Add Menu Links

Hover over <strong>Structure</strong> > <strong>Menus</strong> in the administration menu and click on <strong>Changebank Menu</strong>.

Click on <strong>Add link</strong> and enter the following:

- <strong>Menu link title</strong>: Account
- <strong>Link</strong>: /account

Click on <strong>Save</strong>.

Click on <strong>Add link</strong> again and enter the following:

- <strong>Menu link title</strong>: Make Change
- <strong>Link</strong>: /makechange

Click on <strong>Save</strong>.

### Enable Blocks

Now that we have the User Email, User Login Logout, and the Changebank Menu Blocks, we need to enable them.

Hover over <strong>Structure</strong> in the administration menu and click on <strong>Block layout</strong>.

#### Enable Changebank Menu Block

Scroll down to the <strong>Primary Menu</strong> region and click on <strong>Place block</strong>. Type <strong>Changebank Menu</strong> in the filter field and click on <strong>Place block</strong> to place the block into the region.

Uncheck the <strong>Display title</strong> checkbox since we don't want the title to be displayed.

Click on the <strong>Roles</strong> tab under Visibility and select the <strong>Authenticated user</strong> role.

Click on <strong>Save block</strong>.

<Aside type="note">
Although we set the access restriction to the account and makechange routes to authenticated (logged in) users in our custom module, we also want to make sure that the menu itself is only visible to authenticated users as well.
</Aside>

#### Enable User Email Block

Similar to the Changebank Menu Block, we're going to scroll down to the <strong>Secondary Menu</strong> region and click on <strong>Place block</strong>.

Type <strong>User Email Block</strong> in the filter field and click on <strong>Place block</strong> to place the block into the region.

Uncheck the <strong>Display title</strong> checkbox and click on the <strong>Roles</strong> tab under Visibility and select the <strong>Authenticated user</strong> role.

Click on <strong>Save block</strong>.

#### Enable User Login Logout Block

As with the User Email Block, we're going to scroll down to the <strong>Secondary Menu</strong> region and click on <strong>Place block</strong>.

Type <strong>User Login Logout Block</strong> in the filter field and click on <strong>Place block</strong> to place the block into the region.

Uncheck the <strong>Display title</strong> checkbox.

Since we are controlling the visibility of login and logout links in our custom module, we're going to leave the <strong>Roles</strong> tab under Visibility as <strong>Any role</strong>.

Click on <strong>Save block</strong>.

#### Default Blocks

By default, Drupal will have a <strong>Site branding</strong> block, a <strong>Main navigation</strong> block, and a <strong>User account</strong> block.

We're going to remove the <strong>User account</strong> block since we already have custom login/logout links. Click on the dropdown arrow next to the User account block and click on the <strong>Remove</strong> option.

We're not using the <strong>Main navigation</strong> for authenticated users so we're going to set that to only be visible to anonymous users. Click on the <strong>Configure</strong> link next to the Main navigation block and click on the <strong>Roles</strong> tab under Visibility and select the <strong>Anonymous user</strong> role. Click on <strong>Save block</strong> when you are done.

We want to move the <strong>Site branding</strong> block to the <strong>Secondary Menu</strong> region. You can achieve this by simple dragging and dropping the block into the region. Make sure to position it above the other two blocks and scroll down and click on <strong>Save blocks</strong>.

Finally, we only want to display the logo, so configure the <strong>Site branding</strong> block and uncheck the <strong>Display site name</strong> and <strong>Display site slogan</strong> checkboxes. Click on <strong>Save block</strong>.

## Next Steps
This quickstart is a great way to get a proof of concept up and running quickly, but to run your application in production, there are some things you're going to want to do.

### FusionAuth Customization
FusionAuth gives you the ability to customize just about everything with the user's experience and your application's integration. This includes
* [Hosted pages](/docs/v1/tech/themes/) such as login, registration, email verification, and many more
* [Email templates](/docs/v1/tech/email-templates/email-templates)
* [User data and custom claims in access token JWTs](/articles/tokens/jwt-components-explained)

### Drupal Customization
Drupal is a very powerful CMS and there are many ways to customize it. Here are a few things you may want to do:
* Increase the functionality of the make change form, such as adding a field for the amount of change to make or specifying the type of change to make (quarters, dimes, nickels, pennies)
* Add additional functionality to the application, such as a way to deposit and withdraw money from the account and keep track of all transactions on the account page.
* Customize the FusionAuth login button.

## Troubleshooting

* I get `This site can’t be reached  localhost refused to connect.` when I click the Login button

Ensure FusionAuth is running in the Docker container.  You should be able to login as the admin user, <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-quickstart-php-drupal-web/main/kickstart/kickstart.json" selector="$.variables.adminEmail" /></code> with a password of <code><RemoteValue url="https://raw.githubusercontent.com/FusionAuth/fusionauth-php-quickstart-drupal-web/main/kickstart/kickstart.json" selector="$.variables.adminPassword" /></code> at [http://localhost:9011/admin](http://localhost:9011/admin).

* I get an error page when I click on the Login button with message of `"error_reason" : "invalid_client_id"`

Ensure the value for `config.x.fusionauth.client_id` in the file `config/environments/development.rb` matches client Id configured in FusionAuth for the Example App Application at [http://localhost:9011/admin/application/](http://localhost:9011/admin/application/).